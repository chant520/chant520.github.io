<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
<title>æ­å»ºä¸€ä¸ªvue-cli4+webpack+vantç§»åŠ¨ç«¯æ¡†æ¶ - å—æŸ¯ä¸€å‰‘ğŸ—¡</title>
<meta name="description" content="æ¸©æ•…è€ŒçŸ¥æ–°">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link type='text/css' rel='stylesheet' href='https://chant520.github.io/styles/main.css' media='screen' />
<link type="text/css" rel="stylesheet" href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css">
<link type="text/css" rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">

<script type="text/javascript" src='https://chant520.github.io/media/scripts/jquery.js'></script>
<script type="text/javascript" src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>

<script>
    hljs.initHighlightingOnLoad();
</script>
</head>

<body>
  <div class="layout theme-dark">
    <div class="layout-header">

	<div class="layout-header-main">
		<div class="container">
			<div class="row justify-content-lg-center">
				<div class="col-12 col-lg-9">

					<div class="navbar">

						<div class="logo">
							<a href="https://chant520.github.io">
								<img class="logo"
									src="https://chant520.github.io/media/images/site_avatar.png?v=1589393339869"
									alt="">
							</a>
						</div>

						<div class="menu d-md-inline-block d-none">
							<ul class="layout-navigation-list">
								
								<li class="layout-navigation-item"><a title="é¦–é¡µ"
										href="/">é¦–é¡µ</a>
								</li>
								
								<li class="layout-navigation-item"><a title="å½’æ¡£"
										href="/archives">å½’æ¡£</a>
								</li>
								
								<li class="layout-navigation-item"><a title="æ ‡ç­¾"
										href="/tags">æ ‡ç­¾</a>
								</li>
								
								<li class="layout-navigation-item"><a title="å…³äº"
										href="/post/about">å…³äº</a>
								</li>
								
							</ul>
						</div>

						<div class="item d-md-inline-block d-none">
							<div class="search-icon">
								<i class="fa fa-search" aria-hidden="true"></i>
							</div>
						</div>



						<div class="d-md-inline-block d-none">
							<div class="search-lightbox">
								<div class="search-body">

									<form id="gridea-search-form" data-update="1589393339869" action="/search/" class="search-form">
										<input type="text" name="q" id="s" value="" class="search-field" placeholder="è¯·è¾“å…¥æœç´¢å…³é”®è¯" aria-label="è¯·è¾“å…¥æœç´¢å…³é”®è¯" required="">
										<button type="submit" class="submit" aria-label="Submit">
											<i class="fa fa-search" aria-hidden="true"></i>
										</button>
									</form>

								</div>
							</div>
						</div>

						<div class="nav d-md-none d-inline-block">
							<div class="trigger">
								<i class="fa fa-bars layout-btn-toggle" aria-hidden="true"></i>
							</div>
						</div>

					</div>

				</div>
			</div>




		</div>
	</div>

</div>
    <div class="layout-collapse d-md-none">
	<div class="layout-collapse-main">
		<ul class="layout-collapse-list">
			
			<li class="layout-collapse-item"><a title="é¦–é¡µ" href="/">é¦–é¡µ</a></li>
			
			<li class="layout-collapse-item"><a title="å½’æ¡£" href="/archives">å½’æ¡£</a></li>
			
			<li class="layout-collapse-item"><a title="æ ‡ç­¾" href="/tags">æ ‡ç­¾</a></li>
			
			<li class="layout-collapse-item"><a title="å…³äº" href="/post/about">å…³äº</a></li>
			

		</ul>
	</div>
</div>

    <div class="layout-content">
      <div class="layout-content-main">
        <div class="container">
          <div class="row justify-content-lg-center">
            <div class="col-12 col-lg-9">
              <div class="layout-post">
                <div class="layout-post-body">
                  <div class="row">

                    <div class="col-12 col-lg-10">
                      <div class="layout-post-main m-right m-md-right">
                        <div class="layout-post-header">
                          <h1 class="layout-post-title">æ­å»ºä¸€ä¸ªvue-cli4+webpack+vantç§»åŠ¨ç«¯æ¡†æ¶</h1>
                          <div class="layout-post-meta">
                            <div class="item">
                               <a href="https://chant520.github.io/GU6q6gZ02/" class="post--keyword"
                                data-title="vue" data-type="post_tag" data-term-id="39">vue</a>
                               <a href="https://chant520.github.io/uHgpIGuYa_/" class="post--keyword"
                                data-title="vant" data-type="post_tag" data-term-id="39">vant</a>
                               <a href="https://chant520.github.io/phN6TxH43b/" class="post--keyword"
                                data-title="JavaScript" data-type="post_tag" data-term-id="39">JavaScript</a>
                              
                            </div>
                            <div class="item">
                              <span>2020-05-14</span>
                            </div>
                          </div>
                        </div>
                        <div class="layout-post-content">
                          <div class="layout-post-item">
                            
                            <!-- more -->
<p>æŠ€æœ¯æ ˆï¼švue-cli4 + webpack4 + vant + axios + less + postcss-px2rem</p>
<p>è¦åŒ…æ‹¬å¦‚ä¸‹æŠ€æœ¯ç‚¹ï¼š</p>
<ul>
<li>vue-cli4è„šæ‰‹æ¶</li>
<li>vantæŒ‰éœ€å¼•å…¥</li>
<li>ç§»åŠ¨ç«¯remé€‚é…</li>
<li>axiosæ‹¦æˆªå°è£…</li>
<li>utilå·¥å…·ç±»å‡½æ•°å°è£…</li>
<li>vue-routeré…ç½®</li>
<li>ç™»å½•æƒé™æ ¡éªŒ</li>
<li>å¤šç¯å¢ƒå˜é‡é…ç½®</li>
<li>vue.config.jsé…ç½®</li>
<li>toastç»„ä»¶å°è£…</li>
<li>dialogç»„ä»¶å°è£…</li>
<li>è·¨åŸŸä»£ç†è®¾ç½®</li>
<li>webpackæ‰“åŒ…å¯è§†åŒ–åˆ†æ</li>
<li>CDNèµ„æºä¼˜åŒ–</li>
<li>gzipæ‰“åŒ…ä¼˜åŒ–</li>
<li>é¦–é¡µæ·»åŠ éª¨æ¶å±</li>
</ul>
<h3 id="vueåˆå§‹åŒ–é¡¹ç›®">vueåˆå§‹åŒ–é¡¹ç›®</h3>
<pre><code class="language-bash">vue create [project name]
</code></pre>
<h3 id="å®‰è£…vant">å®‰è£…vant</h3>
<pre><code class="language-bash"># é€šè¿‡ npm å®‰è£…
npm i vant -S

# é€šè¿‡ yarn å®‰è£…
yarn add vant
</code></pre>
<h3 id="å®‰è£…babel-plugin-import">å®‰è£…<code>babel-plugin-import</code></h3>
<pre><code class="language-bash">npm i babel-plugin-import -D
</code></pre>
<blockquote>
<p>è®°å¾—åŠ <code>-D</code>å› ä¸ºæˆ‘ä»¬åªç»™å¼€å‘è€…ä½¿ç”¨</p>
</blockquote>
<h3 id="é…ç½®babel-plugin-import">é…ç½®<code>babel-plugin-import</code></h3>
<pre><code class="language-javascript">// åœ¨.babelrc ä¸­æ·»åŠ é…ç½®
{
  &quot;plugins&quot;: [
    [&quot;import&quot;, {
      &quot;libraryName&quot;: &quot;vant&quot;,
      &quot;libraryDirectory&quot;: &quot;es&quot;,
      &quot;style&quot;: true
    }]
  ]
}
</code></pre>
<pre><code class="language-javascript">// å¯¹äºä½¿ç”¨ babel7 çš„ç”¨æˆ·ï¼Œå¯ä»¥åœ¨ babel.config.js ä¸­é…ç½®
module.exports = {
  plugins: [
    ['import', {
      libraryName: 'vant',
      libraryDirectory: 'es',
      style: true
    }, 'vant']
  ]
};
</code></pre>
<blockquote>
<p>æŒ‰éœ€å¼•å…¥ï¼šä»£ç ä¸­ç›´æ¥å¼•å…¥ Vant ç»„ä»¶ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨å°†ä»£ç è½¬åŒ–ä¸ºæ–¹å¼äºŒä¸­çš„æŒ‰éœ€å¼•å…¥å½¢å¼</p>
<pre><code class="language-javascript">import Vue from 'vue'
import { Button } from 'vant'

Vue.use(Button)
</code></pre>
</blockquote>
<h3 id="rem-é€‚é…">rem é€‚é…</h3>
<ul>
<li>å®‰è£…<code>px2rem-loader</code>æ’ä»¶</li>
</ul>
<pre><code class="language-bash">npm install px2rem-loader --save-dev
</code></pre>
<ul>
<li>åœ¨ vue.config.js è¿›è¡Œå¦‚ä¸‹é…ç½®</li>
</ul>
<pre><code class="language-js">css: {
    // cssé¢„è®¾å™¨é…ç½®é¡¹
    loaderOptions: {
      postcss: {
        plugins: [
          require('postcss-px2rem')({
            remUnit: 100
          })
        ]
      }
    }
  }
</code></pre>
<ul>
<li>åœ¨ main.js è®¾ç½® html è·Ÿå­—ä½“å¤§å°</li>
</ul>
<pre><code class="language-javascript">function initRem() {
  let cale = window.screen.availWidth &gt; 750 ? 2 : window.screen.availWidth / 375
  window.document.documentElement.style.fontSize = `${100 * cale}px`
}

window.addEventListener('resize', function() {
  initRem()
})
</code></pre>
<h3 id="ä½¿ç”¨axioså°è£…è¯·æ±‚">ä½¿ç”¨<code>axios</code>å°è£…è¯·æ±‚</h3>
<ul>
<li>å®‰è£…</li>
</ul>
<pre><code class="language-bash">npm install axios
</code></pre>
<ul>
<li>è®¾ç½®è¯·æ±‚æ‹¦æˆªå’Œå“åº”æ‹¦æˆª</li>
</ul>
<pre><code class="language-javascript">// æ–‡ä»¶ ./src/utils/axios.js
import axios from 'axios'
import vm from 'vm'

const PRODUCT_URL = 'https://xxxx.com'
const MOCK_URL = 'http://xxxx.com'
let http = axios.create({
  baseURL: process.env.NODE_ENV === 'production' ? PRODUCT_URL : MOCK_URL,
})
// è¯·æ±‚æ‹¦æˆªå™¨
http.interceptors.request.use(
  (config) =&gt; {
    // è®¾ç½®tokenï¼ŒContent-Type
    var token = sessionStorage.getItem('token')
    config.headers['token'] = token
    config.headers['Content-Type'] = 'application/json;charset=UTF-8'
    // è¯·æ±‚æ˜¾ç¤ºloadingæ•ˆæœ
    if (config.loading === true) {
      vm.$loading.show()
    }
    return config
  },
  (error) =&gt; {
    vm.$loading.hide()
    return Promise.reject(error)
  }
)
// å“åº”æ‹¦æˆªå™¨
http.interceptors.response.use(
  (res) =&gt; {
    vm.$loading.hide()
    // tokenå¤±æ•ˆï¼Œé‡æ–°ç™»å½•
    if (res.data.code === 401) {
      //  é‡æ–°ç™»å½•
    }
    return res
  },
  (error) =&gt; {
    vm.$loading.hide()
    return Promise.reject(error)
  }
)
</code></pre>
<ul>
<li>å°è£… <code>get</code> å’Œ <code>post</code> è¯·æ±‚æ–¹æ³•</li>
</ul>
<pre><code class="language-javascript">// æ–‡ä»¶ ./src/utils/axios.js


...
function get(url, data, lodaing) {
  return new Promise((resolve, reject) =&gt; {
    http
      .get(url)
      .then(
        (response) =&gt; {
          resolve(response)
        },
        (err) =&gt; {
          reject(err)
        }
      )
      .catch((error) =&gt; {
        reject(error)
      })
  })
}

function post(url, data, loading) {
  return new Promise((resolve, reject) =&gt; {
    http
      .post(url, data, { loading: loading })
      .then(
        (response) =&gt; {
          resolve(response)
        },
        (err) =&gt; {
          reject(err)
        }
      )
      .catch((error) =&gt; {
        reject(error)
      })
  })
}

export { get, post }
</code></pre>
<ul>
<li>æŠŠ <code>get</code>ï¼Œ<code>post</code> æ–¹æ³•æŒ‚è½½åˆ° vue å®ä¾‹ä¸Š</li>
</ul>
<pre><code class="language-javascript">// main.js
import { get, post } from './utils/axios'

Vue.prototype.$http = { get, post }
</code></pre>
<h3 id="å·¥å…·ç±»å‡½æ•°å°è£…">å·¥å…·ç±»å‡½æ•°å°è£…</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹</p>
<ul>
<li>å°è£…æ–¹æ³•</li>
</ul>
<pre><code class="language-javascript">// æ–‡ä»¶ utils/common.js
export default {
  install (Vue, options) {
    Vue.prototype.util = {
      method1(val) {
        ...
      },
      method2 (val) {
       ...
      },
  }
}
</code></pre>
<ul>
<li>åœ¨ main.js é€šè¿‡ vue.use()æ³¨å†Œ</li>
</ul>
<pre><code class="language-java">import utils from './utils/common'
Vue.use(utils)
</code></pre>
<h3 id="vue-router-é…ç½®">vue-router é…ç½®</h3>
<ul>
<li>vue-router ä¸‰ç§é…ç½®æ–¹å¼</li>
</ul>
<pre><code class="language-javascript">// 1ã€Vueå¼‚æ­¥ç»„ä»¶æŠ€æœ¯ï¼š
{
  path: '/home',
  name: 'Home',
  component: resolve =&gt; reqire(['../views/Home.vue'], resolve)
}

// 2ã€es6ææ¡ˆçš„import()
{
  path: '/',
  name: 'home',
  component: () =&gt; import('../views/Home.vue')
}

// 3ã€webpackæä¾›çš„require.ensure()
{
  path: '/home',
  name: 'Home',
  component: r =&gt; require.ensure([],() =&gt;  r(require('../views/Home.vue')), 'home')
}
</code></pre>
<blockquote>
<p>æœ¬é¡¹ç›®é‡‡ç”¨çš„æ˜¯ç¬¬äºŒç§æ–¹å¼ï¼Œä¸ºäº†åç»­ webpack æ‰“åŒ…ä¼˜åŒ–ã€‚</p>
</blockquote>
<h3 id="æ”¹å˜å•é¡µé¢åº”ç”¨çš„-title">æ”¹å˜å•é¡µé¢åº”ç”¨çš„ title</h3>
<pre><code class="language-javascript">router.beforeEach((to, from, next) =&gt; {
  document.title = to.meta.title
})
</code></pre>
<h3 id="ç™»å½•æ ¡éªŒ">ç™»å½•æ ¡éªŒ</h3>
<ul>
<li>é…ç½®è·¯ç”±çš„ meta å¯¹è±¡çš„ auth å±æ€§</li>
</ul>
<pre><code class="language-javascript">const routes = [
  {
    path: '/',
    name: 'home',
    component: () =&gt; import('../views/Home.vue'),
    meta: { title: 'é¦–é¡µ', keepAlive: false, auth: false },
  },
  {
    path: '/mine',
    name: 'mine',
    component: () =&gt; import('../views/mine.vue'),
    meta: { title: 'æˆ‘çš„', keepAlive: false, auth: true },
  },
]
</code></pre>
<ul>
<li>åœ¨è·¯ç”±é¦–é¡µè¿›è¡Œåˆ¤æ–­ã€‚</li>
</ul>
<blockquote>
<p>å½“<code>to.meta.auth</code>ä¸º<code>true</code>(éœ€è¦ç™»å½•)ï¼Œä¸”ä¸å­˜åœ¨ç™»å½•ä¿¡æ¯ç¼“å­˜æ—¶ï¼Œéœ€è¦é‡å®šå‘å»ç™»å½•é¡µé¢</p>
</blockquote>
<pre><code class="language-javascript">router.beforeEach((to, from, next) =&gt; {
  document.title = to.meta.title
  const userInfo = sessionStorage.getItem('userInfo') || null
  if (!userInfo &amp;&amp; to.meta.auth) {
    next('/login')
  } else {
    next()
  }
})
</code></pre>
<h3 id="é¡µé¢ç¼“å­˜é…ç½®">é¡µé¢ç¼“å­˜é…ç½®</h3>
<ul>
<li>é€šè¿‡é…ç½®è·¯ç”±çš„ meta å¯¹è±¡çš„ keepAlive å±æ€§å€¼æ¥åŒºåˆ†é¡µé¢æ˜¯å¦éœ€è¦ç¼“å­˜</li>
</ul>
<pre><code class="language-javascript">const routes = [
  {
    path: '/',
    name: 'home',
    component: () =&gt; import('../views/Home.vue'),
    meta: { title: 'é¦–é¡µ', keepAlive: false, auth: false },
  },
  {
    path: '/list',
    name: 'list',
    component: () =&gt; import('../views/list.vue'),
    meta: { title: 'åˆ—è¡¨é¡µ', keepAlive: true, auth: false },
  },
]
</code></pre>
<ul>
<li>åœ¨ app.vue åšç¼“å­˜åˆ¤æ–­</li>
</ul>
<pre><code class="language-html">&lt;div id=&quot;app&quot;&gt;
  &lt;router-view v-if=&quot;!$route.meta.keepAlive&quot;&gt;&lt;/router-view&gt;
  &lt;keep-alive&gt;
    &lt;router-view v-if=&quot;$route.meta.keepAlive&quot;&gt;&lt;/router-view&gt;
  &lt;/keep-alive&gt;
&lt;/div&gt;
</code></pre>
<h3 id="å¤šç¯å¢ƒå˜é‡é…ç½®">å¤šç¯å¢ƒå˜é‡é…ç½®</h3>
<p>1ã€åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­æ–°å»º.env.*</p>
<ul>
<li>.env.development æœ¬åœ°å¼€å‘ç¯å¢ƒé…ç½®</li>
</ul>
<pre><code>NODE_ENV='development'
VUE_APP_ENV = 'development'
å¤åˆ¶ä»£ç 
</code></pre>
<ul>
<li>.env.test æµ‹è¯•ç¯å¢ƒé…ç½®</li>
</ul>
<pre><code>NODE_ENV='test'
VUE_APP_ENV = 'test'
</code></pre>
<ul>
<li>.env.production æ­£å¼ç¯å¢ƒé…ç½®</li>
</ul>
<pre><code>NODE_ENV='production'
VUE_APP_ENV = 'production'
</code></pre>
<p>ä¸ºäº†åœ¨ä¸åŒç¯å¢ƒé…ç½®æ›´å¤šçš„å˜é‡ï¼Œæˆ‘ä»¬åœ¨ src æ–‡ä»¶ä¸‹æ–°å»ºä¸€ä¸ª config/index</p>
<pre><code class="language-javascript">// æ ¹æ®ç¯å¢ƒå¼•å…¥ä¸åŒé…ç½® process.env.NODE_ENV
const config = require('./env.' + process.env.VUE_APP_ENV)
module.exports = config
</code></pre>
<p>åœ¨åŒçº§ç›®å½•ä¸‹æ–°å»º <code>env.development.js</code>ï¼Œ<code>env.test.js</code>ï¼Œ<code>env.production.js</code>ï¼Œåœ¨é‡Œé¢é…ç½®éœ€è¦çš„å˜é‡ã€‚<br>
ä»¥ env.development.js ä¸ºä¾‹</p>
<pre><code class="language-javascript">module.exports = {
  baseUrl: 'http://localhost:8089', // é¡¹ç›®åœ°å€
  baseApi: 'https://www.mock.com/api', // æœ¬åœ°apiè¯·æ±‚åœ°å€
}
</code></pre>
<p>2ã€é…ç½®æ‰“åŒ…å‘½ä»¤</p>
<p>package.json é‡Œçš„ scripts ä¸åŒç¯å¢ƒçš„æ‰“åŒ…å‘½ä»¤</p>
<ul>
<li>é€šè¿‡ npm run serve å¯åŠ¨æœ¬åœ°</li>
<li>é€šè¿‡ npm run test æ‰“åŒ…æµ‹è¯•</li>
<li>é€šè¿‡ npm run build æ‰“åŒ…æ­£å¼</li>
</ul>
<pre><code class="language-json">&quot;scripts&quot;: {
  &quot;dev&quot;: &quot;vue-cli-service serve&quot;,
  &quot;build&quot;: &quot;vue-cli-service build&quot;,
  &quot;test&quot;: &quot;vue-cli-service build --mode test&quot;,
}
</code></pre>
<h3 id="vueconfigjs-é…ç½®">vue.config.js é…ç½®</h3>
<p>é…ç½®æˆ‘ä»¬é¡¹ç›®çš„ä¸œè¥¿ä¸»è¦åŒ…æ‹¬</p>
<ul>
<li>æ‰“åŒ…åæ–‡ä»¶è¾“å‡ºä½ç½®</li>
<li>å…³é—­ç”Ÿäº§ç¯å¢ƒ souecemap</li>
<li>é…ç½® rem è½¬åŒ– px</li>
<li>é…ç½® alias åˆ«å</li>
<li>å»é™¤ç”Ÿäº§ç¯å¢ƒ console</li>
<li>è·¨åŸŸä»£ç†è®¾ç½®</li>
</ul>
<pre><code class="language-javascript">module.exports = {
  publicPath: './', // é»˜è®¤ä¸º'/'

  // å°†æ„å»ºå¥½çš„æ–‡ä»¶è¾“å‡ºåˆ°å“ªé‡Œï¼Œæœ¬å¸è¦æ±‚
  outputDir: 'dist/static',

  // æ”¾ç½®ç”Ÿæˆçš„é™æ€èµ„æº(jsã€cssã€imgã€fonts)çš„ç›®å½•ã€‚
  assetsDir: 'static',

  // æŒ‡å®šç”Ÿæˆçš„ index.html çš„è¾“å‡ºè·¯å¾„
  indexPath: 'index.html',

  // æ˜¯å¦ä½¿ç”¨åŒ…å«è¿è¡Œæ—¶ç¼–è¯‘å™¨çš„ Vue æ„å»ºç‰ˆæœ¬ã€‚
  runtimeCompiler: false,

  transpileDependencies: [],

  // å¦‚æœä½ ä¸éœ€è¦ç”Ÿäº§ç¯å¢ƒçš„ source map
  productionSourceMap: false,

  // é…ç½®css
  css: {
    // æ˜¯å¦ä½¿ç”¨cssåˆ†ç¦»æ’ä»¶ ExtractTextPlugin
    extract: true,
    sourceMap: true,
    // cssé¢„è®¾å™¨é…ç½®é¡¹
    loaderOptions: {
      postcss: {
        plugins: [
          require('postcss-px2rem')({
            remUnit: 100,
          }),
        ],
      },
    },
    // å¯ç”¨ CSS modules for all css / pre-processor files. vantæŒ‰éœ€å¼•å…¥ä¸€å®šè¦å¼€å¯
    requireModuleExtension: true,
  },

  // æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…è®¸å¯¹å†…éƒ¨çš„ webpack é…ç½®è¿›è¡Œæ›´ç»†ç²’åº¦çš„ä¿®æ”¹ã€‚
  chainWebpack: (config) =&gt; {
    // é…ç½®åˆ«å
    config.resolve.alias
      .set('@', resolve('src'))
      .set('assets', resolve('src/assets'))
      .set('components', resolve('src/components'))
      .set('views', resolve('src/views'))

    config.optimization.minimizer('terser').tap((args) =&gt; {
      // å»é™¤ç”Ÿäº§ç¯å¢ƒconsole
      args[0].terserOptions.compress.drop_console = true
      return args
    })
  },

  // æ˜¯å¦ä¸º Babel æˆ– TypeScript ä½¿ç”¨ thread-loaderã€‚è¯¥é€‰é¡¹åœ¨ç³»ç»Ÿçš„ CPU æœ‰å¤šäºä¸€ä¸ªå†…æ ¸æ—¶è‡ªåŠ¨å¯ç”¨ï¼Œä»…ä½œç”¨äºç”Ÿäº§æ„å»ºã€‚
  parallel: require('os').cpus().length &gt; 1,

  devServer: {
    host: '0.0.0.0',
    port: 8899, // ç«¯å£å·
    https: false, // https:{type:Boolean}
    open: false, // é…ç½®è‡ªåŠ¨å¯åŠ¨æµè§ˆå™¨  open: 'Google Chrome'-é»˜è®¤å¯åŠ¨è°·æ­Œ

    // é…ç½®å¤šä¸ªä»£ç†
    proxy: {
      '/api': {
        target: 'https://www.mock.com',
        ws: true, // ä»£ç†çš„WebSockets
        changeOrigin: true, // å…è®¸websocketsè·¨åŸŸ
        pathRewrite: {
          '^/api': '',
        },
      },
    },
  },
}
</code></pre>
<h3 id="webpack-å¯è§†åŒ–åˆ†æ">webpack å¯è§†åŒ–åˆ†æ</h3>
<ul>
<li>
<p>å®‰è£… <code>webpack-bundle-analyzer</code></p>
<pre><code>npm install webpack-bundle-analyzer -D
</code></pre>
</li>
<li>
<p>æ’ä»¶é…ç½®</p>
<p>åœ¨ vue.config.js é…ç½®</p>
<pre><code class="language-javascript">const { BundleAnalyzerPlugin } = require('webpack-bundle-analyzer')
configureWebpack: (config) =&gt; {
  if (process.env.NODE_ENV === 'production') {
    config.plugins.push(new BundleAnalyzerPlugin())
  }
}
</code></pre>
</li>
</ul>
<h3 id="gzipå‹ç¼©">gzipå‹ç¼©</h3>
<ul>
<li>
<p>å®‰è£…æ’ä»¶</p>
<pre><code class="language-bash">npm install compression-webpack-plugin -D
</code></pre>
</li>
<li>
<p>é…ç½®æ’ä»¶</p>
<pre><code class="language-javascript">configureWebpack: (config) =&gt; {
    if (process.env.NODE_ENV === 'production') {
        config.plugins.push(new BundleAnalyzerPlugin())
        config.plugins.push(new CompressionPlugin({ // gzipå‹ç¼©é…ç½®
            test: /\.js$|\.html$|\.css/, // åŒ¹é…æ–‡ä»¶å
            threshold: 10240, // å¯¹è¶…è¿‡10kbçš„æ•°æ®è¿›è¡Œå‹ç¼©
            deleteOriginalAssets: false // æ˜¯å¦åˆ é™¤åŸæ–‡ä»¶
        }))
    }
}
</code></pre>
</li>
</ul>
<h3 id="æ·»åŠ éª¨æ¶å±">æ·»åŠ éª¨æ¶å±</h3>
<ul>
<li>
<p>å®‰è£…æ’ä»¶</p>
<pre><code class="language-bash">npm install vue-skeleton-webpack-plugin
</code></pre>
</li>
<li>
<p>é…ç½®æ’ä»¶</p>
<pre><code class="language-javascript">configureWebpack: (config) =&gt; {
    config.plugins.push(new SkeletonWebpackPlugin({
      webpackConfig: {
        entry: {
          app: resolve('./src/common/entry-skeleton.js')
        }
      },
      minimize: true,
      quiet: true,
      router: {
        mode: 'hash',
        routes: [
          { path: '/', skeletonId: 'skeleton1' },
          { path: '/about', skeletonId: 'skeleton2' }
        ]
      }
    }))
}
</code></pre>
</li>
</ul>

                          </div>
                        </div>
                        <div class="layout-post-social">
                          <div class="item reader">
                            <div id="/post/da-jian-yi-ge-vue-cli4webpackvant-yi-dong-duan-kuang-jia/" class="leancloud-visitors view"
                              data-flag-title="æ­å»ºä¸€ä¸ªvue-cli4+webpack+vantç§»åŠ¨ç«¯æ¡†æ¶">
                              <span class="post-meta-item-text">é˜…è¯» </span>
                              <span class="leancloud-visitors-count"></span>
                            </div>
                          </div>
                        </div>

                        <div class="layout-post-navigation">
                          <div class="navigation-list">
                            
                            <div class="post-card row">
                              
                              <div class="card-content col-8 col-md-9">
                                <div class="card-body">
                                  <div class="header">
                                    <a href="https://chant520.github.io/hello-gridea/" class="title">
                                      <h4>Hello Gridea</h4>
                                    </a>
                                  </div>
                                  <div class="inner d-none d-sm-block">
                                    <div class="abstract">
                                      <p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>

                                    </div>
                                  </div>
                                </div>
                                <div class="card-footer">
                                  <div class="item"><span>ä¸‹ä¸€ç¯‡</span></div>
                                  <div class="item">2018-12-12</div>
                                </div>
                              </div>
                              <div class="card-thumb col-4 col-md-3">
                                <div class="thumb">
                                  <a href="https://chant520.github.io/hello-gridea/"
                                    style="background-image: url('https://chant520.github.io/post-images/hello-gridea.png');"></a>
                                </div>
                              </div>
                              
                            </div>
                            
                          </div>
                        </div>

                        <div class="layout-comments"></div>
                        
                      </div>
                    </div>

                    <div class="col-12 col-lg-2 d-none d-lg-block">
                      <div class="layout-post-sidebar">
                        <div class="layout-sidebar-item">
                          <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li><a href="#vue%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE">vueåˆå§‹åŒ–é¡¹ç›®</a></li>
<li><a href="#%E5%AE%89%E8%A3%85vant">å®‰è£…vant</a></li>
<li><a href="#%E5%AE%89%E8%A3%85babel-plugin-import">å®‰è£…<code>babel-plugin-import</code></a></li>
<li><a href="#%E9%85%8D%E7%BD%AEbabel-plugin-import">é…ç½®<code>babel-plugin-import</code></a></li>
<li><a href="#rem-%E9%80%82%E9%85%8D">rem é€‚é…</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8axios%E5%B0%81%E8%A3%85%E8%AF%B7%E6%B1%82">ä½¿ç”¨<code>axios</code>å°è£…è¯·æ±‚</a></li>
<li><a href="#%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%87%BD%E6%95%B0%E5%B0%81%E8%A3%85">å·¥å…·ç±»å‡½æ•°å°è£…</a></li>
<li><a href="#vue-router-%E9%85%8D%E7%BD%AE">vue-router é…ç½®</a></li>
<li><a href="#%E6%94%B9%E5%8F%98%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%E7%9A%84-title">æ”¹å˜å•é¡µé¢åº”ç”¨çš„ title</a></li>
<li><a href="#%E7%99%BB%E5%BD%95%E6%A0%A1%E9%AA%8C">ç™»å½•æ ¡éªŒ</a></li>
<li><a href="#%E9%A1%B5%E9%9D%A2%E7%BC%93%E5%AD%98%E9%85%8D%E7%BD%AE">é¡µé¢ç¼“å­˜é…ç½®</a></li>
<li><a href="#%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE">å¤šç¯å¢ƒå˜é‡é…ç½®</a></li>
<li><a href="#vueconfigjs-%E9%85%8D%E7%BD%AE">vue.config.js é…ç½®</a></li>
<li><a href="#webpack-%E5%8F%AF%E8%A7%86%E5%8C%96%E5%88%86%E6%9E%90">webpack å¯è§†åŒ–åˆ†æ</a></li>
<li><a href="#gzip%E5%8E%8B%E7%BC%A9">gzipå‹ç¼©</a></li>
<li><a href="#%E6%B7%BB%E5%8A%A0%E9%AA%A8%E6%9E%B6%E5%B1%8F">æ·»åŠ éª¨æ¶å±</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="layout-totop d-none"><i class="fa fa-angle-up" aria-hidden="true"></i></div>

    	<div class="layout-footer">

		<div class="container">
			<div class="row justify-content-lg-center">
				<div class="col-12 col-lg-9">
					<div class="footer">
						<div class="row">
							<div class="col-12 col-md-9">
								<div class="footer-copy">
									
									Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
									<div class="footer-icp d-none d-sm-inline-block">
										<span class="px-2">â‹…</span>
										
									</div>
								</div>
							</div>
							<div class="col-sm-3 d-none d-md-block">
								<div class="footer-links">
									
									
									
									
									
									
									
									
									
									
									
									
									
									
									
									
									
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>

	<script type="text/javascript" src='https://chant520.github.io/media/scripts/main.js'></script>
	

  </div>
</body>

</html>